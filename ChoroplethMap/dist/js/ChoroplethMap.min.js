const USEducationDataUrl="https://cdn.freecodecamp.org/testable-projects-fcc/data/choropleth_map/for_user_education.json",USCountyDataUrl="https://cdn.freecodecamp.org/testable-projects-fcc/data/choropleth_map/counties.json";let USCountyData,USEducationData,result,legendScale;const margin={top:10,right:10,bottom:10,left:10},width=1e3,height=600,greens=d3.schemeGreens[6];let svgContainer=d3.select("#mapContainer");const pathColor=t=>t<10?greens[0]:t<20?greens[1]:t<30?greens[2]:t<40?greens[3]:t<50?greens[4]:greens[5],drawSvgContainer=()=>{svgContainer.attr("width",1e3).attr("height",600).selectAll("path").data(USCountyData).enter().append("path").attr("d",d3.geoPath()).attr("class","county").attr("data-fips",(t=>t.id)).attr("data-education",(t=>(result=USEducationData.find((e=>e.fips===t.id)),result.bachelorsOrHigher))).attr("fill",(t=>{return result=USEducationData.find((e=>e.fips===t.id)),(e=result.bachelorsOrHigher)<10?greens[0]:e<20?greens[1]:e<30?greens[2]:e<40?greens[3]:e<50?greens[4]:greens[5];var e})).on("mouseover",((t,e)=>{result=USEducationData.find((t=>t.fips===e.id)),tooltip.transition().style("opacity",.9).style("top",t.pageY-margin.top-margin.bottom+"px").style("left",t.pageX+10+"px"),tooltip.html(result.area_name+"</br>"+result.bachelorsOrHigher+"%"),document.querySelector("#tooltip").setAttribute("data-education",result.bachelorsOrHigher)})).on("mouseout",(t=>{tooltip.transition().style("opacity",0)}))},createLegend=()=>{let t=d3.select("#legend");t.append("text").attr("y","25").attr("x","500").html('Source : <a style="stroke:blue" href="https://www.ers.usda.gov/data-products/county-level-data-sets/download-data.aspx">USDA Economics Research Service</a>');const e=e=>{let a;switch(e){case 0:a=greens[0];break;case 1:a=greens[1];break;case 2:a=greens[2];break;case 3:a=greens[3];break;case 4:a=greens[4];break;case 5:a=greens[5];break;case 6:a=greens[6];break;default:break}t.append("rect").attr("class","legendCell").attr("fill",a).attr("width","50").attr("height","25").attr("y","10").attr("x",50*e+100)};let a=d3.scaleLinear().domain([0,.1,.2,.3,.4,.5]).range([100,150]),r=d3.format(".0%"),o=d3.axisBottom().scale(a).ticks(5).tickFormat(r);t.attr("width",1e3).attr("height",60);for(let t=0;t<6;t++)e(t);t.append("g").call(o).attr("class","legend_axis").attr("transform","translate(0,35)")};d3.json(USEducationDataUrl).then((function(t,e){if(e)throw void 0;USEducationData=t,d3.json(USCountyDataUrl).then((function(t,e){if(e)throw void 0;USCountyData=topojson.feature(t,t.objects.counties).features,svgContainer.attr("width",1e3).attr("height",600).selectAll("path").data(USCountyData).enter().append("path").attr("d",d3.geoPath()).attr("class","county").attr("data-fips",(t=>t.id)).attr("data-education",(t=>(result=USEducationData.find((e=>e.fips===t.id)),result.bachelorsOrHigher))).attr("fill",(t=>{return result=USEducationData.find((e=>e.fips===t.id)),(e=result.bachelorsOrHigher)<10?greens[0]:e<20?greens[1]:e<30?greens[2]:e<40?greens[3]:e<50?greens[4]:greens[5];var e})).on("mouseover",((t,e)=>{result=USEducationData.find((t=>t.fips===e.id)),tooltip.transition().style("opacity",.9).style("top",t.pageY-margin.top-margin.bottom+"px").style("left",t.pageX+10+"px"),tooltip.html(result.area_name+"</br>"+result.bachelorsOrHigher+"%"),document.querySelector("#tooltip").setAttribute("data-education",result.bachelorsOrHigher)})).on("mouseout",(t=>{tooltip.transition().style("opacity",0)})),createLegend()}))}));const tooltip=d3.select("body").append("div").attr("id","tooltip").style("opacity",0);