const dataUrl="https://raw.githubusercontent.com/freeCodeCamp/ProjectReferenceData/master/cyclist-data.json";let time,year,yScale,xScale,dataJson=[],dataValues=[];const margin={top:50,right:30,bottom:10,left:70},width=800,height=600;let svgContainer=d3.select("#graphContainer");const drawSvgContainer=()=>{svgContainer.attr("width",800).attr("height",600)},propertyScales=()=>{yScale=d3.scaleLinear().domain([d3.min(time),d3.max(time)]).range([margin.bottom,600-margin.top]),xScale=d3.scaleLinear().domain([d3.min(year)-1,d3.max(year)+1]).range([margin.left,800-margin.right])},drawPlots=()=>{svgContainer.selectAll("circle").data(dataValues).enter().append("circle").attr("class","dot").attr("r","5").attr("data-xvalue",(t=>t.Year)).attr("data-yvalue",(t=>new Date(1e3*t.Seconds))).attr("cx",(t=>xScale(t.Year))).attr("cy",(t=>yScale(1e3*t.Seconds))).attr("fill",(t=>""!=t.Doping?"#F27438":"#7AA95C")).on("mouseover",((t,a)=>{tooltip.transition().style("opacity",.9).style("top",t.pageY-margin.top-margin.bottom+"px").style("left",t.pageX+10+"px"),tooltip.html(a.Name+" "+a.Nationality+"</br>Année: "+a.Year+",  Temps: "+a.Time+(a.Doping?"<br/>"+a.Doping:"")),document.querySelector("#tooltip").setAttribute("data-year",a.Year)})).on("mouseout",(t=>{tooltip.transition().style("opacity",0)}))},nameAxes=()=>{svgContainer.append("text").attr("transform","rotate(-90)").attr("x",-300).attr("y",margin.right/2).style("font-size",16).text("Temps en minutes : secondes"),svgContainer.append("text").attr("x",400).attr("y",600-margin.bottom/2).style("font-size",16).text("Année")},createAxes=()=>{let t=d3.axisBottom(xScale).tickFormat(d3.format("d"));svgContainer.append("g").call(t).attr("id","x-axis").attr("transform","translate(0,"+(600-margin.top)+")");let a=d3.timeFormat("%M:%S"),e=d3.axisLeft(yScale).tickFormat(a);svgContainer.append("g").call(e).attr("id","y-axis").attr("transform","translate("+margin.left+",0)")};d3.json(dataUrl).then((function(t){dataValues=t,time=t.map((t=>1e3*t.Seconds)),year=t.map((t=>t.Year)),svgContainer.attr("width",800).attr("height",600),yScale=d3.scaleLinear().domain([d3.min(time),d3.max(time)]).range([margin.bottom,600-margin.top]),xScale=d3.scaleLinear().domain([d3.min(year)-1,d3.max(year)+1]).range([margin.left,800-margin.right]),svgContainer.selectAll("circle").data(dataValues).enter().append("circle").attr("class","dot").attr("r","5").attr("data-xvalue",(t=>t.Year)).attr("data-yvalue",(t=>new Date(1e3*t.Seconds))).attr("cx",(t=>xScale(t.Year))).attr("cy",(t=>yScale(1e3*t.Seconds))).attr("fill",(t=>""!=t.Doping?"#F27438":"#7AA95C")).on("mouseover",((t,a)=>{tooltip.transition().style("opacity",.9).style("top",t.pageY-margin.top-margin.bottom+"px").style("left",t.pageX+10+"px"),tooltip.html(a.Name+" "+a.Nationality+"</br>Année: "+a.Year+",  Temps: "+a.Time+(a.Doping?"<br/>"+a.Doping:"")),document.querySelector("#tooltip").setAttribute("data-year",a.Year)})).on("mouseout",(t=>{tooltip.transition().style("opacity",0)})),svgContainer.append("text").attr("transform","rotate(-90)").attr("x",-300).attr("y",margin.right/2).style("font-size",16).text("Temps en minutes : secondes"),svgContainer.append("text").attr("x",400).attr("y",600-margin.bottom/2).style("font-size",16).text("Année"),createAxes()}));const tooltip=d3.select("body").append("div").attr("id","tooltip").style("opacity",0);